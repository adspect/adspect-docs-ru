# Трекер

Трекер --- это незаменимый инструмент в цифровой рекламе в целом и в партнерском маркетинге в частности.
Его главная задача состоит в регистрации конверсий (лидов, заказов, продаж) и отслеживании их до
конкретных рекламных объявлений. Это позволяет маркетологам собирать статистику по конверсиям и анализировать
ее в различных разрезах, выстраивая так называемые
[воронки продаж](https://ru.wikipedia.org/wiki/%D0%92%D0%BE%D1%80%D0%BE%D0%BD%D0%BA%D0%B0_%D0%BF%D1%80%D0%BE%D0%B4%D0%B0%D0%B6).

Adspect имеет встроенный в ядро системы трекер, легкий, но в то же время эффективный и полнофункциональный.
В разделе [Статистика](reporting.md) личного кабинета вы можете строить и анализировать различные воронки,
используя любые комбинации доступных группировок и фильтров. В числе прочего, статистика Adspect считает и
отображает такие важнейшие маркетинговые показатели, как конверсии, расход, доход, CR (коэффициент конверсии),
ROI (возврат инвестиций), CPA (цену лида) и EPC (доходность перехода) / EPM (доходность тысячи переходов).
Эти метрики особенно полезны в комбинации с группировкой по отдельным площадкам в источнике трафика, как
описано в [параграфе о настройке Sub ID](streams.md#sub-id).

## Postback

Для того, чтобы использовать трекер, вам понадобится настроить postback --- "отстук" информации о конверсиях
на postback URL, который вы можете найти в вашем профиле. Postback URL принимает три параметра:

1. `aid` --- ID аккаунта в Adspect, который заранее указан в ссылке и обычно не меняется;
2. `cid` --- уникальный идентификатор перехода, с которого произошла конверсия;
3. `sum` (необязательно) --- сумма выплаты за конверсию при работе по моделям CPA и revenue share.

Большинство партнерских программ и сетей поддерживают postback и предоставляют различные макросы, которые
можно использовать для заполнения переменных частей postback-ссылки (параметры `cid` и `sum`). Если вам нужно
делать postback самостоятельно, то вы можете разместить пиксель конверсии где-нибудь, например на странице
"Спасибо". Код пикселя может выглядеть следующим образом (положим, что ID перехода передается в
параметре ссылки `clickid`):

```html
<script>
(function () {
  const postback = new URL("https://rpc.adspect.net/v1/postback?aid=1eb5991f-a25b-68f4-b171-00162501c2b4");
  const params = new URLSearchParams(location.search);
  postback.searchParams.set("cid", params.get("clickid"));
  fetch(postback.href, {mode: "no-cors"});
})();
</script>
```

При успешной регистрации конверсии запрос будет завершен HTTP-кодом ответа 200 и текстом `OK`.

## ID переходов

Чтобы конверсия была зарегистрирована и обработана, Adspect необходимо иметь данные о предшествующем ей
переходе в базе данных статистики, то есть ранее должен быть зарегистрирован переход с тем же ID перехода.
Вы можете использовать внешние ID переходов, например генерируемые рекламной сетью, для чего следует указать
имя параметра ссылки, содержащего ID перехода, в поле [Click ID](streams.md#click-id) в настройках потока.
Вы также можете оставить поле Click ID пустым, и тогда Adspect будет самостоятельно генерировать ID переходов.
Конверсии с ID переходов, которые ранее не были зарегистрированы Adspect, будут отброшены.
